<!DOCTYPE html>
<html>
<head>
	<title>Probability Simulation</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<style>

	body {
		font-family: sans-serif;
		background-color: #f6f6f6;
	}

	#chart-container
	{
		width: 800px;
		margin-left: auto;
		margin-right: auto;
	}

	svg {
		background-color: white;
	}

	.header {
		width: 400px;
		margin-left: auto;
		margin-right: auto;
	}

	.chart {
		
	}

	.chart rect {
	  fill: steelblue;
	  float: bottom;
	}

	.form-container {
		width: 1000px;
		margin-left: auto;
		margin-right: auto;
		padding: 0.5cm;
	}

	.content {
		background-color: white;
		width: 1050px;
		margin: 0.5cm;
		margin-left: auto;
		margin-right: auto;
		padding: 0.2cm;
		border-radius: 10px;
	}

	.axis {
  font: 10px sans-serif;
}

	.axis path, .axis line {
  		fill: none;
  		stroke: #000;
  		shape-rendering: crispEdges;
	}

	.x.axis path {
  		display: none;
	}

	.show_value {
		z-index: 10000;
		color: black;
		text-anchor: middle;
		visibility: hidden;
	}

	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<div class='content'>
	<div class='header'><h1>Probability Simulation</h1></div>
	<div class="form-container">
	<form class="form-inline">
		<label class="sr-only" for="inlineFormInputGroup">Probability of One Success</label>
  		<div class="input-group mb-2 mr-sm-2 mb-sm-0">
    	<div class="input-group-addon">P(single outcome)</div>
    	<input type="text" class="form-control" id="p_one" placeholder="P(single outcome)">
  		</div>

  		<label class="sr-only" for="inlineFormInputGroup"># of Events</label>
  		<div class="input-group mb-2 mr-sm-2 mb-sm-0">
    	<div class="input-group-addon"># of Events</div>
    	<input type="text" class="form-control" id="n_trials" placeholder="# of Events">
  		</div>

  		<label class="sr-only" for="inlineFormInputGroup"># of Simulations</label>
  		<div class="input-group mb-2 mr-sm-2 mb-sm-0">
    	<div class="input-group-addon"># of Simulations</div>
    	<input type="text" class="form-control" id="n_simulations" placeholder="# of Simulations">
  		</div>

  		<div id="submit" class="btn btn-primary">Submit</div>
  	</form>
  	</div>

	<div id='chart-container'>
	<svg class="chart" width="900" height="500">
	<g class="x axis" transform="translate(0,450)">
			<g class="tick" transform="translate(25.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">0</text>
		</g>
			<g class="tick" transform="translate(59.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">1</text>
		</g>
			<g class="tick" transform="translate(93.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">2</text>
		</g>
			<g class="tick" transform="translate(127.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">3</text>
		</g>
			<g class="tick" transform="translate(161.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">4</text>
		</g>
			<g class="tick" transform="translate(195.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">5</text>
		</g>
			<g class="tick" transform="translate(229.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">6</text>
		</g>
			<g class="tick" transform="translate(263.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">7</text>
		</g>
			<g class="tick" transform="translate(297.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">8</text>
		</g>
			<g class="tick" transform="translate(331.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">9</text>
		</g>
			<g class="tick" transform="translate(365.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">10</text>
		</g>
			<g class="tick" transform="translate(399.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">11</text>
		</g>
			<g class="tick" transform="translate(433.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">12</text>
		</g>
			<g class="tick" transform="translate(467.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">13</text>
		</g>
			<g class="tick" transform="translate(501.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">14</text>
		</g>
			<g class="tick" transform="translate(535.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">15</text>
		</g>
			<g class="tick" transform="translate(569.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">16</text>
		</g>
			<g class="tick" transform="translate(603.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">17</text>
		</g>
			<g class="tick" transform="translate(637.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">18</text>
		</g>
			<g class="tick" transform="translate(671.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">19</text>
		</g>
			<g class="tick" transform="translate(705.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">20</text>
		</g>
			<g class="tick" transform="translate(739.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">21</text>
		</g>
			<g class="tick" transform="translate(773.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">22</text>
		</g>
			<g class="tick" transform="translate(807.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">23</text>
		</g>
			<g class="tick" transform="translate(841.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">24</text>
		</g>
			<g class="tick" transform="translate(875.5,0)" style="opacity: 1;"><line y2="6" x2="0"></line>
			<text dy=".71em" y="9" x="0" style="text-anchor: middle;">25</text>
		</g>
		<path class="domain" d="M0,6V0H900V6"></path>
	</g>
  		<rect class="bar" x="10" width="31" y="160.66367501180912" height="289.3363249881909" data-index="0"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="44" width="31" y="397.1421823334908" height="52.85781766650922" data-index="1"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="78" width="31" y="351.4407179971658" height="98.55928200283421" data-index="2"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="112" width="31" y="299.3268776570619" height="150.6731223429381" data-index="3"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="146" width="31" y="0" height="450" data-index="4"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="180" width="31" y="368.94189891355694" height="81.05810108644306" data-index="5"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="214" width="31" y="378.61360415682566" height="71.38639584317434" data-index="6"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="248" width="31" y="234.10486537553143" height="215.89513462446857" data-index="7"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="282" width="31" y="203.21209258384505" height="246.78790741615495" data-index="8"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="316" width="31" y="444.57959376476146" height="5.420406235238545" data-index="9"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="350" width="31" y="422.64997638167216" height="27.35002361832784" data-index="10"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="384" width="31" y="307.4043457723193" height="142.5956542276807" data-index="11"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="418" width="31" y="364.76145488899385" height="85.23854511100615" data-index="12"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="452" width="31" y="210.89985829003308" height="239.10014170996692" data-index="13"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="486" width="31" y="184.0458195559754" height="265.9541804440246" data-index="14"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="520" width="31" y="381.660368445914" height="68.339631554086" data-index="15"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="554" width="31" y="446.6343882853094" height="3.3656117146906013" data-index="16"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="588" width="31" y="237.89560699102503" height="212.10439300897497" data-index="17"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="622" width="31" y="225.850259801606" height="224.149740198394" data-index="18"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="656" width="31" y="129.16863486065182" height="320.8313651393482" data-index="19"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="690" width="31" y="352.29097779877185" height="97.70902220122815" data-index="20"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="724" width="31" y="415.3519130845536" height="34.64808691544641" data-index="21"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="758" width="31" y="366.39111950873877" height="83.60888049126123" data-index="22"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="792" width="31" y="444.68587623996217" height="5.31412376003783" data-index="23"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="826" width="31" y="380.06613131790266" height="69.93386868209734" data-index="24"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
		<rect class="bar" x="860" width="31" y="447.3783656117147" height="2.6216343882853153" data-index="25"></rect>
		<text class="show_value" dy=".71em" y="9" x="161.5" style="text-anchor:middle;">Ahhh</text>
	</svg>
	</div>
	</div>
  	<script type="text/javascript">
		$("document").ready(function()
		{
			$("rect").on('mouseover', function() {
				$(this).css('fill','red');
				//$(this).attr('width','50');
			});

			$("rect").on('mouseleave', function() {
				$(this).css('fill','steelblue');
				//$(this).attr('width','40');
			});


			function one_simul(p_one, n_trials) {
				var n_successes = 0;
				var counter = 0;
				while(counter < n_trials)
				{
					var roll = Math.random()
					if(roll < p_one)
					{
						n_successes++;
					}
					counter++;
				}
				return n_successes;
			}


			function many_simuls(p_one, n_trials, n_simulations) {
				var data = [];
				var counter = 0;
				while(counter < n_simulations)
				{
					var n_successes = one_simul(p_one, n_trials);
					data.push(n_successes);
					counter++;
				}
				return data;
			}


			function get_counts(data) {
				var counts = {};

				for(var i = 0; i < data.length; i++) {
    				var num = data[i];
    				counts[num] = counts[num] ? counts[num]+1 : 1;
					}
				for(var i = 0; i < 27; i++) {
					if(counts[i] == undefined){
						counts[i] = 0;
					}
				}
				return counts;
			}

			//console.log(many_simuls(.5,100,20));

			$("#submit").on('click', function() {
				var p_one = parseFloat($('#p_one').val());
				var n_trials = parseFloat($('#n_trials').val());
				var n_simulations = parseFloat($('#n_simulations').val());

				if(p_one < 0 || p_one > 1){
					alert('Error: The probability should be between 0 and 1. You may need to convert your probability from a percent to a decimal.');
					return 0;
					}

				if(n_trials > 25){
					alert('Error, the number of trials per a simulation must be less than 26. This is a limit of the program, not a limit of the mathematics.');
					return 0;
					}

				console.log('We are running ' + n_simulations + ' simulations of the experiment. Each simulation will have ' + n_trials + ' trials and the probability of success on each trial is ' + p_one + '.');
				var counts = get_counts(many_simuls(p_one,n_trials,n_simulations));
				console.log(counts);
				//console.log(counts[100])
				//console.log(counts[10]+counts[11]);

				$('.bar').each(function () {
					var index = $(this).data("index");
					var value = counts[index]
					var height = value*1.0/n_simulations*450;
					var y_disp = 450 - height;

					$(this).attr("y",y_disp);
					$(this).attr("height",height);
					$(this).attr("value", value);

					var text_x = parseFloat($(this).attr("x")) +15.5;
					var text_y = y_disp - 20;
					//var text_y = 9;
					var text_dy = "0.71em";
					$(this).next().attr("x",text_x).attr("y",text_y).text(value);
				});

				$('.bar').on('mouseover',function()
				{
					$(this).next().css("visibility","visible");
				});

				$('.bar').on('mouseleave',function()
				{
					$(this).next().css("visibility","hidden");
				});
			});

		});
	</script>

</body>
</html>